<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Reset Password | RMHUB</title>
  <link rel="icon" type="image/x-icon" href="/images/NavImg.jpg" />

  <!-- Bootstrap 4 -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />

  <!-- Font (optional) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <style>
    :root{
      --primary:#3cf696; --primary2:#22d67f; --ink:#0f172a; --muted:#64748b;
      --line:rgba(15,23,42,0.10); --card:#fff; --bg:#f6f8fb; --danger:#ef4444; --radius:18px;
    }
    html,body{height:100%}
    body{
      font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(900px 500px at 20% 10%, rgba(60,246,150,.18), transparent 60%),
                  radial-gradient(800px 450px at 80% 20%, rgba(34,214,127,.12), transparent 55%),
                  var(--bg);
      color:var(--ink);
    }
    .auth-shell{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px 14px}
    .auth-card{
      width:100%;max-width:980px;background:var(--card);
      border-radius:var(--radius);border:1px solid var(--line);
      overflow:hidden;box-shadow:0 18px 50px rgba(2,8,23,.10);
    }

    /* LEFT FORM */
    .form-pane{padding:32px 28px}
    .form-header{margin-bottom:16px;text-align:left}
    .form-header h1{font-size:22px;margin:0 0 6px;font-weight:900}
    .form-header p{margin:0;color:var(--muted);font-size:13.5px;line-height:1.5}
    .inline-alert{
      background:rgba(239,68,68,.06);border:1px solid rgba(239,68,68,.20);
      color:#991b1b;padding:10px 12px;border-radius:12px;font-size:13px;margin:12px 0 0;
    }

    .form-label{font-size:12.5px;font-weight:800;color:rgba(15,23,42,.80);margin-bottom:6px}
    .form-control{
      height:46px;border-radius:12px;border:1px solid rgba(15,23,42,.14);
      background:#fff;padding:10px 12px;transition:box-shadow 180ms ease,border-color 180ms ease;
    }
    .form-control:focus{border-color:rgba(60,246,150,.9);box-shadow:0 0 0 4px rgba(60,246,150,.18)}
    .error{color:var(--danger);font-size:12.5px;margin-top:6px;line-height:1.35}

    /* Password eye toggle */
    .pw-group .form-control{border-top-right-radius:0;border-bottom-right-radius:0}
    .pw-toggle{
      height:46px;border-top-right-radius:12px;border-bottom-right-radius:12px;
      border:1px solid rgba(15,23,42,.14);border-left:0;background:#fff;padding:0 12px;
      display:inline-flex;align-items:center;justify-content:center;cursor:pointer;
      transition:box-shadow 180ms ease,border-color 180ms ease;
    }
    .pw-toggle:focus{outline:none;border-color:rgba(60,246,150,.9);box-shadow:0 0 0 4px rgba(60,246,150,.12)}
    .pw-toggle svg{width:18px;height:18px;opacity:.75;color:rgba(15,23,42,.9)}

    .btn-primary-rm{
      height:46px;border-radius:12px;border:none;width:100%;
      font-weight:900;color:#06301b;background:linear-gradient(135deg,var(--primary),var(--primary2));
      transition:transform 120ms ease,box-shadow 120ms ease,filter 120ms ease;
    }
    .btn-primary-rm:hover{filter:brightness(.98);box-shadow:0 14px 28px rgba(34,214,127,.20);transform:translateY(-1px)}
    .muted-link{color:var(--muted);font-size:13px;margin-top:10px}
    .muted-link a{color:rgba(34,214,127,1);font-weight:900;text-decoration:none}
    .muted-link a:hover{text-decoration:underline}

    /* RIGHT BRAND */
    .brand-pane{background:linear-gradient(135deg,var(--primary),var(--primary2));padding:28px;position:relative;min-height:100%}
    .brand-pane:before{
      content:"";position:absolute;inset:-60px -60px auto auto;width:240px;height:240px;
      background:rgba(255,255,255,.22);border-radius:999px;filter:blur(2px);pointer-events:none;
    }
    .brand-top{position:relative;display:flex;align-items:center}
    .brand-badge{
      height:52px;width:160px;border-radius:16px;background:rgba(255,255,255,.22);
      border:1px solid rgba(255,255,255,.45);display:inline-flex;align-items:center;justify-content:center;
      padding:8px 10px;backdrop-filter:blur(8px);
    }
    .brand-logo{width:100%;height:100%;object-fit:contain;border-radius:12px;display:block}
    .brand-mini{position:relative;margin-top:14px;color:rgba(6,32,18,.88);font-size:13.5px;line-height:1.45;max-width:300px}
    .brand-mini strong{font-weight:900;color:rgba(6,32,18,.95)}
    .brand-icons{position:relative;margin-top:14px;display:flex;flex-wrap:wrap;gap:10px}
    .icon-chip{
      width:44px;height:44px;border-radius:14px;background:rgba(255,255,255,.22);
      border:1px solid rgba(255,255,255,.45);display:inline-flex;align-items:center;justify-content:center;
      backdrop-filter:blur(6px);
    }
    .icon-chip svg{width:20px;height:20px;opacity:.92;color:rgba(6,32,18,.92)}
    .brand-hero{
      position:absolute;right:14px;bottom:14px;width:210px;height:210px;opacity:.16;pointer-events:none;
      color:rgba(6,32,18,.92);filter:drop-shadow(0 12px 18px rgba(2,8,23,.10));
    }

    @media (max-width:767.98px){
      .form-pane{padding:22px 18px}
      .brand-pane{padding:22px 18px}
      .brand-badge{width:150px;height:50px}
    }
  </style>
</head>

<body>
  <div class="auth-shell">
    <div class="auth-card">
      <div class="row no-gutters">

        <!-- LEFT: FORM -->
        <div class="col-md-7">
          <div class="form-pane">
            <div class="form-header">
              <h1>Reset password</h1>
              <p>Set a new password for your RMHUB account.</p>

              <% if (locals && (locals.message || locals.error)) { %>
                <div class="inline-alert"><%= (locals.message || locals.error) %></div>
              <% } %>
            </div>

            <form action="/forpasreset" method="post" onsubmit="return validatePassword()">
              <div class="form-group">
                <label for="password" class="form-label">New password</label>
                <div class="input-group pw-group">
                  <input type="password" class="form-control" placeholder="New Password" id="password" name="password" />
                  <div class="input-group-append">
                    <button type="button" class="pw-toggle" data-toggle="pw" data-target="password" aria-label="Show password" aria-pressed="false">
                      <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                      <svg class="eye-closed d-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 12s3.5-7 10-7c2.3 0 4.2.8 5.7 1.8"></path>
                        <path d="M22 12s-3.5 7-10 7c-2.3 0-4.2-.8-5.7-1.8"></path>
                        <path d="M3 3l18 18"></path>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="error" id="passwordError"></div>
              </div>

              <div class="form-group">
                <label for="confirmPassword" class="form-label">Confirm password</label>
                <div class="input-group pw-group">
                  <input type="password" class="form-control" placeholder="Confirm Password" id="confirmPassword" name="confirmPassword" />
                  <div class="input-group-append">
                    <button type="button" class="pw-toggle" data-toggle="pw" data-target="confirmPassword" aria-label="Show password" aria-pressed="false">
                      <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                      <svg class="eye-closed d-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 12s3.5-7 10-7c2.3 0 4.2.8 5.7 1.8"></path>
                        <path d="M22 12s-3.5 7-10 7c-2.3 0-4.2-.8-5.7-1.8"></path>
                        <path d="M3 3l18 18"></path>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="error" id="confirmPasswordError"></div>
              </div>

              <div class="form-group mb-2">
                <button type="submit" class="btn btn-primary-rm">Reset</button>
              </div>

              <p class="muted-link mb-0">
                Back to <a href="/login">Login</a>
              </p>
            </form>
          </div>
        </div>

        <!-- RIGHT: BRAND -->
        <div class="col-md-5 d-none d-md-block">
          <div class="brand-pane h-100">
            <div class="brand-top">
              <div class="brand-badge" title="RMHUB">
                <img src="/images/NavImg.jpg" class="brand-logo" alt="RMHUB Logo" />
              </div>
            </div>

            <div class="brand-mini">
              Keep your account secure while shopping <strong>Phones</strong>, <strong>Watches</strong>, and <strong>Tablets</strong>.
            </div>

            <div class="brand-icons" aria-label="Security and categories">
              <!-- Lock -->
              <div class="icon-chip" title="Secure" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="5" y="11" width="14" height="10" rx="2"></rect>
                  <path d="M8 11V8a4 4 0 0 1 8 0v3"></path>
                </svg>
              </div>
              <!-- Phone -->
              <div class="icon-chip" title="Phones" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="7" y="2.5" width="10" height="19" rx="2"></rect>
                  <path d="M10 18.5h4"></path>
                </svg>
              </div>
              <!-- Watch -->
              <div class="icon-chip" title="Watches" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="4"></circle>
                  <path d="M10 2h4l1 4h-6l1-4z"></path>
                  <path d="M10 22h4l1-4h-6l1 4z"></path>
                </svg>
              </div>
              <!-- Tablet -->
              <div class="icon-chip" title="Tablets" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="5" y="3" width="14" height="18" rx="2"></rect>
                  <path d="M12 18h.01"></path>
                </svg>
              </div>
            </div>

            <!-- Watermark bag -->
            <svg class="brand-hero" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" aria-hidden="true">
              <path d="M6 8h12l-1 14H7L6 8z"></path>
              <path d="M9 8V6a3 3 0 0 1 6 0v2"></path>
              <path d="M7 12h10"></path>
            </svg>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    // Eye toggles
    (function () {
      var btns = document.querySelectorAll('[data-toggle="pw"]');
      btns.forEach(function (btn) {
        btn.addEventListener('click', function () {
          var targetId = btn.getAttribute('data-target');
          var input = document.getElementById(targetId);
          if (!input) return;

          var isHidden = input.type === 'password';
          input.type = isHidden ? 'text' : 'password';

          var openEye = btn.querySelector('.eye-open');
          var closedEye = btn.querySelector('.eye-closed');

          if (isHidden) {
            openEye.classList.add('d-none');
            closedEye.classList.remove('d-none');
            btn.setAttribute('aria-label', 'Hide password');
            btn.setAttribute('aria-pressed', 'true');
          } else {
            openEye.classList.remove('d-none');
            closedEye.classList.add('d-none');
            btn.setAttribute('aria-label', 'Show password');
            btn.setAttribute('aria-pressed', 'false');
          }
        });
      });
    })();

    // Your original validation logic (non-empty + match), with border sync
    function validatePassword() {
      var password = document.getElementById("password").value.trim();
      var confirmPassword = document.getElementById("confirmPassword").value.trim();
      var isValid = true;

      function setBorder(id, ok) {
        var el = document.getElementById(id);
        if (!el) return;

        el.style.borderColor = ok ? "" : "red";

        var group = el.closest('.pw-group');
        if (group) {
          var toggle = group.querySelector('.pw-toggle');
          if (toggle) toggle.style.borderColor = ok ? "" : "red";
        }
      }

      if (password === "") {
        document.getElementById("passwordError").textContent = "*Please enter a valid password.";
        setBorder("password", false);
        isValid = false;
      } else {
        document.getElementById("passwordError").textContent = "";
        setBorder("password", true);
      }

      if (confirmPassword === "") {
        document.getElementById("confirmPasswordError").textContent = "*Please confirm your password.";
        setBorder("confirmPassword", false);
        isValid = false;
      } else if (password !== confirmPassword) {
        document.getElementById("confirmPasswordError").textContent = "*Passwords do not match.";
        setBorder("confirmPassword", false);
        isValid = false;
      } else {
        document.getElementById("confirmPasswordError").textContent = "";
        setBorder("confirmPassword", true);
      }

      return isValid;
    }
  </script>
</body>
</html>
