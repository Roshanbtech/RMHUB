<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RMHUB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="icon" type="image/x-icon" href="/images/NavImg.jpg">

  <!-- Bootstrap 4 -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">

  <!-- Font (optional) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary: #3cf696;
      --primary-2: #22d67f;
      --ink: #0f172a;
      --muted: #64748b;
      --line: rgba(15, 23, 42, 0.10);
      --card: #ffffff;
      --bg: #f6f8fb;
      --danger: #ef4444;
      --radius: 18px;
    }

    html, body { height: 100%; }

    body{
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(900px 500px at 20% 10%, rgba(60, 246, 150, 0.18), transparent 60%),
                  radial-gradient(800px 450px at 80% 20%, rgba(34, 214, 127, 0.12), transparent 55%),
                  var(--bg);
      color: var(--ink);
    }

    .auth-shell{
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 14px;
    }

    .auth-card{
      width: 100%;
      max-width: 980px;
      background: var(--card);
      border-radius: var(--radius);
      border: 1px solid var(--line);
      overflow: hidden;
      box-shadow: 0 18px 50px rgba(2, 8, 23, 0.10);
    }

    /* LEFT PANEL */
    .brand-pane{
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      padding: 28px;
      position: relative;
      min-height: 100%;
    }

    .brand-pane:before{
      content:"";
      position:absolute;
      inset:-60px -60px auto auto;
      width: 240px;
      height: 240px;
      background: rgba(255,255,255,0.22);
      border-radius: 999px;
      filter: blur(2px);
      pointer-events: none;
    }

    .brand-top{
      position: relative;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .brand-img{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      background: rgba(255,255,255,0.25);
      border: 1px solid rgba(255,255,255,0.45);
      object-fit: cover;
    }

    .brand-word{
      font-weight: 900;
      letter-spacing: 0.8px;
      font-size: 18px;
      color: #062012;
      text-transform: uppercase;
    }

    .brand-mini{
      position: relative;
      margin-top: 14px;
      color: rgba(6, 32, 18, 0.85);
      font-size: 13.5px;
      line-height: 1.45;
      max-width: 280px;
    }

    .brand-icons{
      position: relative;
      margin-top: 14px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .icon-chip{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      background: rgba(255,255,255,0.22);
      border: 1px solid rgba(255,255,255,0.45);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(6px);
    }

    .icon-chip svg{
      width: 20px;
      height: 20px;
      opacity: 0.92;
      color: rgba(6, 32, 18, 0.92);
    }

    .brand-hero{
      position: absolute;
      right: 14px;
      bottom: 14px;
      width: 210px;
      height: 210px;
      opacity: 0.16;
      pointer-events: none;
      color: rgba(6, 32, 18, 0.92);
      filter: drop-shadow(0 12px 18px rgba(2, 8, 23, 0.10));
    }

    /* RIGHT PANEL */
    .form-pane{
      padding: 32px 28px;
    }

    .form-header{
      margin-bottom: 16px;
      text-align: left;
    }

    .form-header h1{
      font-size: 22px;
      margin: 0 0 6px;
      font-weight: 900;
    }

    .form-header p{
      margin: 0;
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.5;
    }

    .inline-alert{
      background: rgba(239, 68, 68, 0.06);
      border: 1px solid rgba(239, 68, 68, 0.20);
      color: #991b1b;
      padding: 10px 12px;
      border-radius: 12px;
      font-size: 13px;
      margin: 12px 0 0;
    }

    .form-label{
      font-size: 12.5px;
      font-weight: 800;
      color: rgba(15,23,42,0.80);
      margin-bottom: 6px;
    }

    .form-control{
      height: 46px;
      border-radius: 12px;
      border: 1px solid rgba(15, 23, 42, 0.14);
      background: #fff;
      padding: 10px 12px;
      transition: box-shadow 180ms ease, border-color 180ms ease;
    }

    .form-control:focus{
      border-color: rgba(60, 246, 150, 0.9);
      box-shadow: 0 0 0 4px rgba(60, 246, 150, 0.18);
    }

    .error{
      color: var(--danger);
      font-size: 12.5px;
      margin-top: 6px;
      line-height: 1.35;
    }

    /* Password eye toggle */
    .pw-group .form-control{
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    .pw-toggle{
      height: 46px;
      border-top-right-radius: 12px;
      border-bottom-right-radius: 12px;
      border: 1px solid rgba(15, 23, 42, 0.14);
      border-left: 0;
      background: #fff;
      padding: 0 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: box-shadow 180ms ease, border-color 180ms ease;
    }

    .pw-toggle:focus{
      outline: none;
      border-color: rgba(60, 246, 150, 0.9);
      box-shadow: 0 0 0 4px rgba(60, 246, 150, 0.12);
    }

    .pw-toggle svg{
      width: 18px;
      height: 18px;
      opacity: 0.75;
      color: rgba(15,23,42,0.9);
    }

    .btn-primary-rm{
      height: 46px;
      border-radius: 12px;
      border: none;
      width: 100%;
      font-weight: 900;
      color: #06301b;
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      transition: transform 120ms ease, box-shadow 120ms ease, filter 120ms ease;
    }

    .btn-primary-rm:hover{
      filter: brightness(0.98);
      box-shadow: 0 14px 28px rgba(34, 214, 127, 0.20);
      transform: translateY(-1px);
    }

    .muted-link{
      color: var(--muted);
      font-size: 13px;
      margin-top: 10px;
    }

    .muted-link a{
      color: rgba(34, 214, 127, 1);
      font-weight: 900;
      text-decoration: none;
    }

    .muted-link a:hover{
      text-decoration: underline;
    }

    @media (max-width: 767.98px){
      .form-pane{ padding: 22px 18px; }
      .brand-pane{ padding: 22px 18px; }
    }
  </style>
</head>

<body>
  <div class="auth-shell">
    <div class="auth-card">
      <div class="row no-gutters">

        <!-- LEFT: BRAND / ICONS (minimal) -->
        <div class="col-md-5 d-none d-md-block">
          <div class="brand-pane h-100">
            <div class="brand-top">
              <img src="/images/NavImg.jpg" class="brand-img" alt="RMHUB">
              <div class="brand-word">RMHUB</div>
            </div>

            <div class="brand-mini">
              Faster checkout. Order updates. One account.
            </div>

            <div class="brand-icons" aria-label="Shopping icons">
              <!-- Cart -->
              <div class="icon-chip" title="Cart" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 6h15l-1.5 9h-12z"></path>
                  <path d="M6 6l-2-3H1"></path>
                  <circle cx="9" cy="20" r="1.5"></circle>
                  <circle cx="18" cy="20" r="1.5"></circle>
                </svg>
              </div>

              <!-- Bag -->
              <div class="icon-chip" title="Bag" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 8h12l-1 14H7L6 8z"></path>
                  <path d="M9 8V6a3 3 0 0 1 6 0v2"></path>
                </svg>
              </div>

              <!-- Delivery -->
              <div class="icon-chip" title="Delivery" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 7h11v10H3z"></path>
                  <path d="M14 10h4l3 3v4h-7z"></path>
                  <circle cx="7" cy="19" r="1.5"></circle>
                  <circle cx="18" cy="19" r="1.5"></circle>
                </svg>
              </div>
            </div>

            <!-- Watermark hero -->
            <svg class="brand-hero" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" aria-hidden="true">
              <path d="M6 8h12l-1 14H7L6 8z"></path>
              <path d="M9 8V6a3 3 0 0 1 6 0v2"></path>
              <path d="M7 12h10"></path>
            </svg>
          </div>
        </div>

        <!-- RIGHT: FORM -->
        <div class="col-md-7">
          <div class="form-pane">
            <div class="form-header">
              <h1>Create account</h1>
              <p>Use your email and mobile number.</p>

              <% if (locals.exists) { %>
                <div class="inline-alert"><%= exists %></div>
              <% } %>
            </div>

            <form action="/signup" method="post" onsubmit="return validateForm()">
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="firstName" class="form-label">First name</label>
                  <input type="text" class="form-control" placeholder="First name" name="firstName" id="firstName" autocomplete="given-name" />
                  <div class="error" id="firstNameError"></div>
                </div>

                <div class="form-group col-md-6">
                  <label for="lastName" class="form-label">Last name</label>
                  <input type="text" class="form-control" placeholder="Last name" name="lastName" id="lastName" autocomplete="family-name" />
                  <div class="error" id="lastNameError"></div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="mobileNumber" class="form-label">Mobile</label>
                  <input type="tel" class="form-control" placeholder="07XXXXXXXX" name="mobileNumber" id="mobileNumber" inputmode="numeric" autocomplete="tel" />
                  <div class="error" id="mobileNumberError"></div>
                </div>

                <div class="form-group col-md-6">
                  <label for="email" class="form-label">Email</label>
                  <input type="email" class="form-control" placeholder="name@example.com" name="email" id="email" autocomplete="email" />
                  <div class="error" id="emailError"></div>
                </div>
              </div>

              <div class="form-row">
                <!-- Password -->
                <div class="form-group col-md-6">
                  <label for="password" class="form-label">Password</label>

                  <div class="input-group pw-group">
                    <input type="password" class="form-control" placeholder="Password" name="password" id="password" autocomplete="new-password" />

                    <div class="input-group-append">
                      <button
                        type="button"
                        class="pw-toggle"
                        data-toggle="pw"
                        data-target="password"
                        aria-label="Show password"
                        aria-pressed="false"
                      >
                        <!-- eye -->
                        <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12z"></path>
                          <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <!-- eye-off -->
                        <svg class="eye-closed d-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M2 12s3.5-7 10-7c2.3 0 4.2.8 5.7 1.8"></path>
                          <path d="M22 12s-3.5 7-10 7c-2.3 0-4.2-.8-5.7-1.8"></path>
                          <path d="M3 3l18 18"></path>
                        </svg>
                      </button>
                    </div>
                  </div>

                  <div class="error" id="passwordError"></div>
                </div>

                <!-- Confirm Password -->
                <div class="form-group col-md-6">
                  <label for="confirmPassword" class="form-label">Confirm</label>

                  <div class="input-group pw-group">
                    <input type="password" class="form-control" placeholder="Confirm password" name="confirmPassword" id="confirmPassword" autocomplete="new-password" />

                    <div class="input-group-append">
                      <button
                        type="button"
                        class="pw-toggle"
                        data-toggle="pw"
                        data-target="confirmPassword"
                        aria-label="Show password"
                        aria-pressed="false"
                      >
                        <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12z"></path>
                          <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <svg class="eye-closed d-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M2 12s3.5-7 10-7c2.3 0 4.2.8 5.7 1.8"></path>
                          <path d="M22 12s-3.5 7-10 7c-2.3 0-4.2-.8-5.7-1.8"></path>
                          <path d="M3 3l18 18"></path>
                        </svg>
                      </button>
                    </div>
                  </div>

                  <div class="error" id="confirmPasswordError"></div>
                </div>
              </div>

              <div class="form-group">
                <label for="referalCode" class="form-label">Referral (optional)</label>
                <input type="text" class="form-control" placeholder="Referral code" name="referalCode" id="referalCode" autocomplete="off" />
                <div class="error" id="referalCodeError"></div>
              </div>

              <div class="form-group mb-2">
                <button type="submit" class="btn btn-primary-rm">Create account</button>
              </div>

              <p class="muted-link mb-0">
                Already have an account? <a href="/login">Login</a>
              </p>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <script>
    // Password visibility toggles (eye icons)
    (function () {
      var btns = document.querySelectorAll('[data-toggle="pw"]');
      btns.forEach(function (btn) {
        btn.addEventListener('click', function () {
          var targetId = btn.getAttribute('data-target');
          var input = document.getElementById(targetId);
          if (!input) return;

          var isHidden = input.type === 'password';
          input.type = isHidden ? 'text' : 'password';

          var openEye = btn.querySelector('.eye-open');
          var closedEye = btn.querySelector('.eye-closed');

          if (isHidden) {
            openEye.classList.add('d-none');
            closedEye.classList.remove('d-none');
            btn.setAttribute('aria-label', 'Hide password');
            btn.setAttribute('aria-pressed', 'true');
          } else {
            openEye.classList.remove('d-none');
            closedEye.classList.add('d-none');
            btn.setAttribute('aria-label', 'Show password');
            btn.setAttribute('aria-pressed', 'false');
          }
        });
      });
    })();

    // Validations (keeps all your IDs + error containers)
    function validateForm() {
      var firstName = document.getElementById("firstName").value.trim();
      var lastName = document.getElementById("lastName").value.trim();
      var mobileNumber = document.getElementById("mobileNumber").value;
      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;
      var confirmPassword = document.getElementById("confirmPassword").value;
      var referralCode = document.getElementById("referalCode").value;

      var isValid = true;

      function setBorder(id, ok) {
        var el = document.getElementById(id);
        if (!el) return;

        el.style.borderColor = ok ? "" : "red";

        // Sync toggle border for password groups
        var group = el.closest('.pw-group');
        if (group) {
          var toggle = group.querySelector('.pw-toggle');
          if (toggle) toggle.style.borderColor = ok ? "" : "red";
        }
      }

      // First Name
      if (!firstName.match(/^[a-zA-Z]+$/)) {
        document.getElementById("firstNameError").innerHTML = "*Please enter a valid first name";
        setBorder("firstName", false);
        isValid = false;
      } else {
        document.getElementById("firstNameError").innerHTML = "";
        setBorder("firstName", true);
      }

      // Last Name
      if (!lastName.match(/^[a-zA-Z]+$/)) {
        document.getElementById("lastNameError").innerHTML = "*Please enter a valid last name";
        setBorder("lastName", false);
        isValid = false;
      } else {
        document.getElementById("lastNameError").innerHTML = "";
        setBorder("lastName", true);
      }

      // Mobile
      if (!mobileNumber.match(/^\d{10}$/)) {
        document.getElementById("mobileNumberError").innerHTML = "*Please enter a 10-digit mobile number";
        setBorder("mobileNumber", false);
        isValid = false;
      } else {
        document.getElementById("mobileNumberError").innerHTML = "";
        setBorder("mobileNumber", true);
      }

      // Email
      if (!email.match(/\S+@\S+\.\S+/)) {
        document.getElementById("emailError").innerHTML = "*Please enter a valid email address";
        setBorder("email", false);
        isValid = false;
      } else {
        document.getElementById("emailError").innerHTML = "";
        setBorder("email", true);
      }

      // Password (same rule you used)
      if (!password.match(/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{6,}$/)) {
        document.getElementById("passwordError").innerHTML =
          "*Password must contain at least one uppercase letter, one digit, one special character, and be at least 6 characters long";
        setBorder("password", false);
        isValid = false;
      } else {
        document.getElementById("passwordError").innerHTML = "";
        setBorder("password", true);
      }

      // Confirm Password
      if (password !== confirmPassword) {
        document.getElementById("confirmPasswordError").innerHTML = "*Passwords do not match";
        setBorder("confirmPassword", false);
        isValid = false;
      } else {
        document.getElementById("confirmPasswordError").innerHTML = "";
        setBorder("confirmPassword", true);
      }

      // Referral Code is optional (no validation)
      return isValid;
    }
  </script>
</body>
</html>
